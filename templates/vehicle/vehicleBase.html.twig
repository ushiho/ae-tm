{% extends 'base.html.twig' %}

{% block vehicles_class %}class="active"{% endblock %}
{% block header %}
    Vehicles
{% endblock %}
{% block header_annex %}
    <li><a href="index.html">Home</a></li>
    <li class="active">Vehicles</li>
{% endblock %}

{% block left_column %}
    <a href="{{path('addVehicle')}}" class="list-group-item"><span class="glyphicon glyphicon-facetime-video" aria-hidden="true"></span> Add Vehicle</a>
    {% for type in types %}
        <a href="{{path('addByType', {'idType':type.id})}}" class="list-group-item"><span class="glyphicon glyphicon-facetime-video" aria-hidden="true"></span> {{ type.name }} Managment</a>
    {% endfor %}
    <a href="/vehicle" class="list-group-item"><span class="glyphicon glyphicon-facetime-video" aria-hidden="true"></span> Show all Vehicles</a>
    <a href="#" class="list-group-item"><span class="glyphicon glyphicon-facetime-video" aria-hidden="true"></span> Search</a>
{% endblock %}

{% block center_column %}
    <div class="panel-heading main-color-bg">
        <h3 class="panel-title">Vehicles</h3>
    </div>

        {% block path %}

        {% endblock %}

    <div class="panel-body">
        <a title="Add new Vehicle" href="/vehicle/new" class="btn-group-justified btn-primary btn-xs " >ADD NEW </a>
        <br>
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                {% if vehicles is empty or vehicles is null %}
                    <tr class="bg">
                        <td class="first" style="text-align:center;font-weight: bold;">There is no vehicles add one <a href="/mission/new" style="color:red;text-decoration: underline black;">here</a></td>
                    </tr>
                {% else %}
                <tr>
                    <th class="first">Matricule</th>
                    <th>Type</th>
                    <th>Brand</th>
                    <th>State</th>
                    <th>Rent Information</th>
                    <th class="last">Actions</th>
                </tr>
                {% for Vehicle in vehicles %}
                <tr class="bg">
                    <td class="first">{{ Vehicle.matricule }}</td>
                    <td class="first">{{ Vehicle.type.name }}</td>
                    <td class="first">{{ Vehicle.brand}}</td>
                    <td class="first">
                    {% if Vehicle.state == 1 %}New{% elseif Vehicle.state == 2 %}Good Condition
                    {% else %}Bad Condition{% endif %}
                    </td>
                    <td class="first">
                    {% if Vehicle.allocate != null or Vehicle.allocate is not empty() %}Show
                    {% else %} Add a Rent{% endif %}
                    </td>
                    <td>
                        <div class="btn-group btn-sm">
                            <a href="{{ path('showVehicle', {'id': Vehicle.id}) }}"class="btn btn-info">Details</a>
                            <a href="{{ path('editVehicle', {'id': Vehicle.id}) }}" onclick="return confirm('Are u sure, You want to edit this vehicle?')"class="btn btn-default" >Edit</a>
                            {% if connectedUser.role == 1 %}
                            <a href="{{ path('deleteVehicle', {'id': Vehicle.id}) }}" onclick="return confirm('Are u sure, You want to delete this vehicle?')" class="btn btn-danger">Delete</a>
                            {% endif %}
                        </div>
                    </td>
                </tr>
                {% endfor %}
                {% endif %}
        </table>
        <br>
        {% if vehicles is not empty and vehicles is not null %}
            <div class="first"><a class="btn-group-justified btn-danger btn-xs " href="{{ path('deleteAllVehicles') }}" onclick="return confirm('Are u sure, You want to delete all Vehciles?')" >Delete All</a></div>
        {% endif %}
    </div>
    </div>

{% endblock %}

